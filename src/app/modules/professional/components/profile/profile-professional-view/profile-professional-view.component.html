<ng-template [ngIf]="profile?.profile" >
  <div (window:resize)="onResize($event)" class="cover-container">
    <img src="./assets/images/img-profile-profesional/COVER-IMAGE.PNG" alt="" />
  </div>
  <div class="brand-container">
    <div class="boxContProf">
      <div class="sectionProfile">
        <div class="avatarBox">
          <img
            *ngIf="profile.profile.profilePicture"
            src="{{ profile?.profile?.profilePicture }}"
            alt="Profile Picture"
          />
          <img
            *ngIf="!profile.profile.profilePicture"
            src="https://vmcontenders.org/wp-content/plugins/freshweb-cdi-avatar/front/images/avatar-member-min.jpg"
            alt="Profile Picture"
          />
        </div>
        <div class="boxProfile">
          <h1>{{ profile?.profile?.name }} {{ profile?.profile?.lastName }}</h1>
          <span class="subtitle" >{{ profile?.profile?.subtitle }}</span>
          <div class="powers" *ngIf="!isMobile" >
            <span>Superpowers:</span>
            <div >
                <p *ngFor="let super of profile?.profile?.superpowers.split(',');" > {{ super }} </p>
            </div>
            <!--
              <div>
                <p>branding</p>
                <p>product manager</p>
                <p>sketching</p>
              </div>
            -->
          </div>
        </div>
        <div class="viewProfile">
          <div class="boxDesc" *ngIf="isMobile" >
              <div class="subDesc" >

                  <div class="boxDescIzq" >
                      <span>Superpowers:</span>
                  </div>

                  <div class="boxDescDer" >
                      <p class="supPow" *ngFor="let super of profile?.profile?.superpowers.split(',');" > {{ super }} </p>
                  </div>
    
                </div>
            <div class="subDesc" *ngIf="profile?.profile?.availability" >
              <div class="boxDescIzq" >
                <span> Availability:</span>
              </div>
              <div class="boxDescDer" >
                <p> {{ profile?.profile?.availability }}</p>
              </div>
            </div>
            <div class="subDesc" *ngIf="profile?.profile?.location" > 
              <div class="boxDescIzq" >
                <span> Location: </span>
              </div>
              <div class="boxDescDer" >
                  <p> {{ profile?.profile?.location }}</p>
              </div>
            </div>
            <div class="subDesc" *ngIf="profile?.profile?.experienceLevel" >
              <div class="boxDescIzq" >
                <span> Experience Level: </span>
              </div>
              <div class="boxDescDer" >
                <p> {{ profile?.profile?.experienceLevel }}</p>
              </div>
            </div>
            <div class="subDesc" *ngIf="profile?.profile?.contactInformation" >
              <div class="boxDescIzq" >
                <span> Phone number: </span>
              </div>
              <div class="boxDescDer" >
                <p> {{ profile?.profile?.contactInformation }}</p>
              </div>
            </div>
            <div class="subDesc" *ngIf="profile?.profile?.skills" >
              <div class="boxDescIzq" >
                <span> Skills: </span>
              </div>
              <div class="boxDescDer skillder" >
                <div class="skills" style="margin-top: 0;">
                  <ul *ngFor="let item of profile?.profile?.skills" >
                    <li> {{ item }} </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="subDesc" *ngIf="profile?.profile?.contactInformation" >
              <div class="boxDescIzq" >
                <span> Web site: </span>
              </div>
              <div class="boxDescDer" >
                <p> {{  profile?.profile?.websiteUrl }}</p>
              </div>
            </div>
          </div>
          <div class="boxDesc" *ngIf="!isMobile" > <!-- No Mobile -->
            <div>
              <span> Availability:</span>
              <p> {{ profile?.profile?.availability }}</p>
            </div>
            <div>
              <span> Location: </span>
              <p> {{ profile?.profile?.location }}</p>
            </div>
            <div>
              <span> Experience Level:</span>
              <p> {{ profile?.profile?.experienceLevel }}</p>                 
            </div>
            <div *ngIf="profile?.profile?.contactInformation">
              <span>Phone number:</span>
              <p>{{ profile?.profile?.contactInformation }}</p>
            </div> 
            <div *ngIf="profile?.profile?.websiteUrl">
              <span *ngIf="profile?.profile?.websiteUrl"  >Web Site: </span>
              <p style="text-transform: none;">{{ profile?.profile?.websiteUrl }}</p>
            </div>
            <div>
              <span>Skills: </span>
              <p class="skills">
                <label *ngFor="let item of profile?.profile?.skills; let last = last">
                  {{ item }} <label *ngIf="!last">,</label>
                </label>
              </p>
            </div>
          </div>
          <div class="editB">
            <a routerLink="/professional/profile/edit">edit profile</a>
          </div>
        </div>
      </div>
      <div class="sectionDesc">
        <div class="title">
          <h2>professional summary</h2>
        </div>
        <div class="boxEdu">
          <span>Education</span>
          <p class="text">
            {{ profile?.profile?.education }}
          </p>
          <!--
            <p>rochester institute of technology, university of wisconsin-stout</p>
          -->
        </div>
        <div class="boxEdu">
          <span> About Me </span>
          <p class="text">
            {{ profile?.profile?.experience }}
          </p>

          <!--
            <p>user interface designer, visual designer | UI/UX | illustrator.</p>
            <p>
              visual designer |UI/UX in vignelli center for design studies,
              contact art director in martion flynn, freelance motion designer.
            </p>
          -->
        </div>
        <div class="boxView" *ngIf="profile?.profile?.resume && profile?.profile?.resume !== 'undefined'; ">
          <a *ngIf="!isMobile" 
            href="{{ profile?.profile?.resume }}"
            target="_blank">
            VIEW MY RESUME
          </a>
          <a *ngIf="isMobile" 
            href="{{ profile?.profile?.resume }}"
            target="_blank">
            CV/RESUME
          </a>
        </div>
      </div>
    </div>
    <div class="navInt">
      <mat-tab-group *ngIf="!isMobile" >
        <mat-tab label="portfolio ">
          <div class="divContainerGalery">
            <!-- add images -->
            <div class="addImg">
              <div class="addText">
                  <p> Upload images of projects you have worked with to shows companies your skills. </p>
              </div>
              <div class="addImage">
                  <button class="upload" (click)="setForm()">
                      Upload Image <i class="upicon fa fa-upload"></i>
                  </button>
              </div>
            </div>
            <!-- bucle images -->
            <div class="contentGalery">
              <div *ngFor="let item of pageOfPhoto" class="secGalery">
                <div class="divbutton">
                  <button (click)="setForm(item)" class="editG">
                    <i class="fa fa-edit fa-3x"></i>
                  </button>
                  <button (click)="deletePhoto(item?._id)" class="deleteG">
                    <i class="fa fa-times fa-3x"></i>
                  </button>
                </div>
                <div class="imgGalery">
                  <img src="{{ item?.picture }}" alt="" />
                </div>
                <div class="descImg">
                  <span>{{ item?.name }}</span>
                  <p>{{ item?.description }}</p>
                </div>
              </div>
            </div>
            <!-- pagination -->
            <div class="pagination">
              <jw-pagination
                [items]="profile?.profile?.portfolio"
                [pageSize]="6"
                (changePage)="onChangePhoto($event)"
              ></jw-pagination>
            </div>
          </div>
        </mat-tab>
        <mat-tab label="ASSESSMENTS">
          <!-- Not Assessments -->
          <div class="containerAssessment">
            <!-- <span class="duration">Not Assessments</span> -->
            <div class="table">
              <p class="tableTitle"> List of Assessments taken </p>
              <table>
                <tr
                  *ngFor="let item of pageOfAssessments"
                  class="filaTable"
                  class="filaTable"
                >
                <ng-template [ngIf]="item?.assessment">
                  <td class="jobCel">
                    <h3 class="job-link">{{ item?.assessment?.name }}</h3>
                    <p>  <span>Track:</span> {{ item?.assessment?.track?.name }} </p>
                  </td>
                  <td class="content_button_Two content_button_take">
                    <span
                      >TAKEN
                      <img
                        src="../../../../../../../assets/images/TAKEN_ICON.PNG"
                        alt=""
                      />
                    </span>
                    <button
                      class="assessment-link"
                      routerLink="/professional/assessments/feedback/{{
                        item?.assessment?._id
                      }}"
                      [disabled]="item?.feedback.length == 0"
                    >
                      VIEW FEEDBACK
                    </button>
                  </td>
                </ng-template>
                </tr>
              </table>
              <div class="pagination">
                <jw-pagination
                  [items]="profile?.assessments"
                  (changePage)="onChangeAssessment($event)"
                ></jw-pagination>
              </div>
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
      <mat-accordion *ngIf="isMobile" >
        <mat-expansion-panel class="panel">
          <mat-expansion-panel-header class="TitleAcc">
            PORTFOLIO
          </mat-expansion-panel-header>
          <div class="addText">
            <p> Upload images of projects you have worked with to shows companies your skills. </p>
          </div>
          <div class="addImage">
            <button class="upload" (click)="setForm()">
              Upload Image <i class="fa fa-upload"></i>
            </button>
          </div>
          <div class="contentGalery">
            <div *ngFor="let item of pageOfPhoto" class="secGalery">
              <div class="imgGalery">
                <div class="divbutton">
                  <button (click)="setForm(item)" class="editG">
                    <i class="fa fa-edit fa-2x"></i>
                  </button>
                  <button (click)="deletePhoto(item?._id)" class="deleteG">
                    <i class="fa fa-times fa-2x"></i>
                  </button>
                </div>
                <img src="{{ item?.picture }}" alt="" />
              </div>
              <div class="descImg">
                <span>{{ item?.name }}</span>
                <p>{{ item?.description }}</p>
              </div>
            </div>
          </div>
          <!-- pagination -->
          <div class="pagination">
            <jw-pagination
              [items]="profile?.profile?.portfolio"
              [pageSize]="6"
              (changePage)="onChangePhoto($event)"
            ></jw-pagination>
          </div>
        </mat-expansion-panel>
        <mat-expansion-panel class="panel">
          <mat-expansion-panel-header class="TitleAcc">
            ASSESSMENTS
          </mat-expansion-panel-header>
          <div class="containerAssessment">
            <!-- <span class="duration">Not Assessments</span> -->
            <div class="table">
              <p class="tableTitle"> List of Assessments taken </p>
              <table>
                <tr
                  *ngFor="let item of pageOfAssessments"
                  class="filaTable"
                >
                <ng-template [ngIf]="item?.assessment">

                  <td class="jobCel">
                    <h3 class="job-link">{{ item?.assessment?.name }}</h3>
                    <p>  
                      <span>Track:</span>
                      {{ item?.assessment?.track?.name }}
                    </p>
                  </td>
                  <td class="content_button_Two content_button_take">
                    <span
                      >TAKEN
                      <img
                        src="../../../../../../../assets/images/TAKEN_ICON.PNG"
                        alt=""
                      />
                    </span>
                    <button
                      class="assessment-link"
                      routerLink="/professional/assessments/feedback/{{
                        item?.assessment?._id
                      }}"
                      [disabled]="item?.feedback.length == 0"
                    >
                      VIEW FEEDBACK
                    </button>
                  </td>
                </ng-template>
                </tr>
              </table>
              <div class="pagination">
                <jw-pagination
                  [items]="profile?.assessments"
                  (changePage)="onChangeAssessment($event)"
                ></jw-pagination>
              </div>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
</ng-template>

<app-dialog [(visible)]="showDialog">
  <form
    [formGroup]="f"
    class="container-form"
    #formUpdate="ngForm"
    (ngSubmit)="f.valid && addPhoto()"
  >
    <h2 class="dialogTitle"> Add Image to portfolio </h2>
    <div class="profile-photo" *ngIf="action == 'Add'">
      <div *ngIf="!base64textString; then default; else img"></div>
      <ng-template #default>
        <img
          src="/assets/images/add.png"
          class="galery-photo"
          alt="Upload Photo"
          (click)="openFileBrowserAsPhoto($event)"
        />
      </ng-template>
      <ng-template #img>
        <img
          [src]="base64textString"
          class="galery-photo"
          alt="Loading photo"
          (click)="openFileBrowserAsPhoto($event)"
          style="padding: 0;
                 width: 120px;
                 height: 120px;
                 border: none; "
        />
      </ng-template>
      <br />
      <input
        type="file"
        name="photo"
        id="photo"
        class="hide"
        (change)="onFileChangePhoto($event)"
      />
      <input type="hidden" name="fileHidden" formControlName="picture" />
      <h3 class="dialogSubtitle"  (click)="openFileBrowserAsPhoto($event)" > UPLOAD PHOTO </h3>
    </div>
    <div class="name-content">
      <label for="">Name</label>
      <input
        type="text"
        maxlength="30"
        placeholder="Name"
        formControlName="name"
        [ngClass]="{ 'has-error': inputHasError(name, formUpdate.submitted) }"
      />
      <span *ngIf="inputHasError(name, formUpdate.submitted)">
        <sh-error-message
          [hasError]="name.errors.required"
          text="Name is"
          strongText="required"
        ></sh-error-message>
        <sh-error-message
          [hasError]="name.errors.pattern"
          text="only text is"
          strongText="allowed"
        ></sh-error-message>
      </span>
    </div>
    <div class="description-content">
      <label for="">Description</label>
      <textarea
        name=""
        id=""
        placeholder=" Add description here"
        cols="10"
        rows="5"
        maxlength="180"
        formControlName="description"
        [ngClass]="{
          'has-error': inputHasError(description, formUpdate.submitted)
        }"
      >
      </textarea>
      <span *ngIf="inputHasError(description, formUpdate.submitted)">
        <sh-error-message
          [hasError]="description.errors.required"
          text="Description is"
          strongText="required"
        ></sh-error-message>
      </span>
    </div>
    <div *ngIf="!pending; then button; else spinner"></div>
    <ng-template #button>
      <div class="updateDialog">
          <button class="update">{{ action }}</button>
      </div>
    </ng-template>
    <ng-template #spinner>
      <div style="display: block;">
        <sk-wave [isRunning]="pending" color="lightgrey"></sk-wave>
      </div>
    </ng-template>
  </form>
</app-dialog>
